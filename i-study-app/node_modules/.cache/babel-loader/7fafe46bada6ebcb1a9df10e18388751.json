{"ast":null,"code":"import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED, LOGOUT_SUCCESS, GET_USER_PROFILE_REQUEST, GET_USER_PROFILE_FAILED, GET_USER_PROFILE_SUCCESS, GET_USER_LIST_SUCCESS, GET_USER_LIST_REQUEST, GET_USER_LIST_FAILED, REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAILED, UPDATE_USER_PROFILE_REQUEST, UPDATE_USER_PROFILE_SUCCESS, UPDATE_USER_PROFILE_FAILED } from \"../reducers/user\";\nimport * as userService from \"../services/userService\";\nimport { USER_TYPE_NUMBER } from \"../utilities/constants\";\nexport const login = payload => async (dispatch, getState) => {\n  dispatch(LOGIN_REQUEST());\n\n  try {\n    const {\n      username,\n      password\n    } = payload;\n    const {\n      status,\n      data\n    } = await userService.login(username, password);\n\n    if (status === 200) {\n      localStorage.setItem(\"accessToken\", data.jwt);\n      dispatch(LOGIN_SUCCESS(data));\n    } else {\n      dispatch(LOGIN_FAILED());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(LOGIN_FAILED());\n  }\n};\nexport const getUserProfile = () => async (dispatch, getState) => {\n  dispatch(GET_USER_PROFILE_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.getUserInfo();\n    console.log(data);\n\n    if (status === 200) {\n      dispatch(GET_USER_PROFILE_SUCCESS(data));\n    } else dispatch(GET_USER_PROFILE_FAILED());\n  } catch (error) {\n    dispatch(GET_USER_PROFILE_FAILED());\n  }\n};\nexport const getUserList = () => async (dispatch, getState) => {\n  dispatch(GET_USER_LIST_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.getUserList();\n\n    if (status === 200) {\n      dispatch(GET_USER_LIST_SUCCESS(data));\n    } else dispatch(GET_USER_LIST_FAILED());\n  } catch (error) {\n    dispatch(GET_USER_LIST_FAILED());\n  }\n};\nexport const register = payload => async (dispatch, getState) => {\n  dispatch(REGISTER_USER_REQUEST());\n\n  try {\n    const {\n      userType\n    } = payload;\n\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\n      const {\n        data,\n        status\n      } = await userService.registerTeacher(payload);\n\n      if (status === 201) {\n        dispatch(REGISTER_USER_SUCCESS());\n      } else dispatch(REGISTER_USER_FAILED());\n    }\n\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\n      const {\n        data,\n        status\n      } = await userService.registerStudent(payload);\n\n      if (status === 201) {\n        dispatch(REGISTER_USER_SUCCESS());\n      } else dispatch(REGISTER_USER_FAILED());\n    }\n  } catch (error) {\n    dispatch(REGISTER_USER_FAILED());\n  }\n};\nexport const updateUserProfile = payload => async (dispatch, getState) => {\n  dispatch(UPDATE_USER_PROFILE_REQUEST());\n\n  try {\n    const {\n      userType\n    } = payload;\n\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\n      const {\n        data,\n        status\n      } = await userService.registerTeacher(payload);\n\n      if (status === 201) {\n        dispatch(REGISTER_USER_SUCCESS());\n      } else dispatch(REGISTER_USER_FAILED());\n    }\n\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\n      const {\n        data,\n        status\n      } = await userService.registerStudent(payload);\n\n      if (status === 200) {\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\n    }\n  } catch (error) {\n    dispatch(UPDATE_USER_PROFILE_FAILED());\n  }\n};\nexport const logout = () => async (dispatch, getState) => {\n  localStorage.removeItem(\"accessToken\");\n  dispatch(LOGOUT_SUCCESS());\n};","map":{"version":3,"sources":["C:/Users/Wen Jie/Folder/i-study/i-study-app/src/thunks/user.js"],"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_SUCCESS","GET_USER_PROFILE_REQUEST","GET_USER_PROFILE_FAILED","GET_USER_PROFILE_SUCCESS","GET_USER_LIST_SUCCESS","GET_USER_LIST_REQUEST","GET_USER_LIST_FAILED","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAILED","UPDATE_USER_PROFILE_REQUEST","UPDATE_USER_PROFILE_SUCCESS","UPDATE_USER_PROFILE_FAILED","userService","USER_TYPE_NUMBER","login","payload","dispatch","getState","username","password","status","data","localStorage","setItem","jwt","error","console","log","getUserProfile","getUserInfo","getUserList","register","userType","TEACHER","registerTeacher","STUDENT","registerStudent","updateUserProfile","logout","removeItem"],"mappings":"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","sourcesContent":["import {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILED,\r\n  LOGOUT_SUCCESS,\r\n  GET_USER_PROFILE_REQUEST,\r\n  GET_USER_PROFILE_FAILED,\r\n  GET_USER_PROFILE_SUCCESS,\r\n  GET_USER_LIST_SUCCESS,\r\n  GET_USER_LIST_REQUEST,\r\n  GET_USER_LIST_FAILED,\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAILED,\r\n  UPDATE_USER_PROFILE_REQUEST,\r\n  UPDATE_USER_PROFILE_SUCCESS,\r\n  UPDATE_USER_PROFILE_FAILED,\r\n} from \"../reducers/user\";\r\nimport * as userService from \"../services/userService\";\r\nimport { USER_TYPE_NUMBER } from \"../utilities/constants\";\r\n\r\nexport const login = (payload) => async (dispatch, getState) => {\r\n  dispatch(LOGIN_REQUEST());\r\n  try {\r\n    const { username, password } = payload;\r\n    const { status, data } = await userService.login(username, password);\r\n    if (status === 200) {\r\n      localStorage.setItem(\"accessToken\", data.jwt);\r\n      dispatch(LOGIN_SUCCESS(data));\r\n    } else {\r\n      dispatch(LOGIN_FAILED());\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch(LOGIN_FAILED());\r\n  }\r\n};\r\n\r\nexport const getUserProfile = () => async (dispatch, getState) => {\r\n  dispatch(GET_USER_PROFILE_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.getUserInfo();\r\n    console.log(data);\r\n    if (status === 200) {\r\n      dispatch(GET_USER_PROFILE_SUCCESS(data));\r\n    } else dispatch(GET_USER_PROFILE_FAILED());\r\n  } catch (error) {\r\n    dispatch(GET_USER_PROFILE_FAILED());\r\n  }\r\n};\r\n\r\nexport const getUserList = () => async (dispatch, getState) => {\r\n  dispatch(GET_USER_LIST_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.getUserList();\r\n\r\n    if (status === 200) {\r\n      dispatch(GET_USER_LIST_SUCCESS(data));\r\n    } else dispatch(GET_USER_LIST_FAILED());\r\n  } catch (error) {\r\n    dispatch(GET_USER_LIST_FAILED());\r\n  }\r\n};\r\n\r\nexport const register = (payload) => async (dispatch, getState) => {\r\n  dispatch(REGISTER_USER_REQUEST());\r\n  try {\r\n    const { userType } = payload;\r\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\r\n      const { data, status } = await userService.registerTeacher(payload);\r\n\r\n      if (status === 201) {\r\n        dispatch(REGISTER_USER_SUCCESS());\r\n      } else dispatch(REGISTER_USER_FAILED());\r\n    }\r\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\r\n      const { data, status } = await userService.registerStudent(payload);\r\n\r\n      if (status === 201) {\r\n        dispatch(REGISTER_USER_SUCCESS());\r\n      } else dispatch(REGISTER_USER_FAILED());\r\n    }\r\n  } catch (error) {\r\n    dispatch(REGISTER_USER_FAILED());\r\n  }\r\n};\r\n\r\nexport const updateUserProfile = (payload) => async (dispatch, getState) => {\r\n  dispatch(UPDATE_USER_PROFILE_REQUEST());\r\n  try {\r\n    const { userType } = payload;\r\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\r\n      const { data, status } = await userService.registerTeacher(payload);\r\n\r\n      if (status === 201) {\r\n        dispatch(REGISTER_USER_SUCCESS());\r\n      } else dispatch(REGISTER_USER_FAILED());\r\n    }\r\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\r\n      const { data, status } = await userService.registerStudent(payload);\r\n\r\n      if (status === 200) {\r\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\r\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\r\n    }\r\n  } catch (error) {\r\n    dispatch(UPDATE_USER_PROFILE_FAILED());\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch, getState) => {\r\n  localStorage.removeItem(\"accessToken\");\r\n  dispatch(LOGOUT_SUCCESS());\r\n};\r\n"]},"metadata":{},"sourceType":"module"}