{"ast":null,"code":"import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED, LOGOUT_SUCCESS, GET_USER_PROFILE_REQUEST, GET_USER_PROFILE_FAILED, GET_USER_PROFILE_SUCCESS, GET_USER_LIST_SUCCESS, GET_USER_LIST_REQUEST, GET_USER_LIST_FAILED, REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAILED, UPDATE_USER_PROFILE_REQUEST, UPDATE_USER_PROFILE_SUCCESS, UPDATE_USER_PROFILE_FAILED, VERIFY_TOKEN_REQUEST, VERIFY_TOKEN_SUCCESS, VERIFY_TOKEN_FAILED, DELETE_USER_SUCCESS, DELETE_USER_FAILED, DELETE_USER_REQUEST } from \"../reducers/user\";\nimport * as userService from \"../services/userService\";\nimport * as studentService from \"../services/studentService\";\nimport * as teacherService from \"../services/teacherService\";\nimport * as userSelectors from \"../selectors/user\";\nimport { USER_TYPE_NUMBER } from \"../utilities/constants\";\nimport history from \"../utilities/history\";\nexport const login = payload => async (dispatch, getState) => {\n  dispatch(LOGIN_REQUEST());\n\n  try {\n    const {\n      username,\n      password\n    } = payload;\n    const {\n      status,\n      data\n    } = await userService.login(username, password);\n\n    if (status === 200) {\n      localStorage.setItem(\"accessToken\", data.jwt);\n      dispatch(LOGIN_SUCCESS(data));\n      history.replace(\"/dashboard\");\n    } else {\n      dispatch(LOGIN_FAILED());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(LOGIN_FAILED());\n  }\n};\nexport const verifyToken = () => async dispatch => {\n  dispatch(VERIFY_TOKEN_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.verifyToken();\n    const {\n      jwt\n    } = data;\n\n    if (status === 200) {\n      localStorage.setItem(\"accessToken\", jwt);\n      dispatch(VERIFY_TOKEN_SUCCESS(data));\n    } else {\n      dispatch(VERIFY_TOKEN_FAILED());\n      dispatch(logout());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(VERIFY_TOKEN_FAILED());\n  }\n};\nexport const getUserProfile = () => async (dispatch, getState) => {\n  dispatch(GET_USER_PROFILE_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.getUserInfo();\n\n    if (status === 200) {\n      dispatch(GET_USER_PROFILE_SUCCESS(data));\n    } else dispatch(GET_USER_PROFILE_FAILED());\n  } catch (error) {\n    dispatch(GET_USER_PROFILE_FAILED());\n  }\n};\nexport const getUserList = () => async (dispatch, getState) => {\n  dispatch(GET_USER_LIST_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.getUserList();\n\n    if (status === 200) {\n      dispatch(GET_USER_LIST_SUCCESS(data));\n    } else dispatch(GET_USER_LIST_FAILED());\n  } catch (error) {\n    dispatch(GET_USER_LIST_FAILED());\n  }\n};\nexport const register = payload => async (dispatch, getState) => {\n  dispatch(REGISTER_USER_REQUEST());\n\n  try {\n    const {\n      userType\n    } = payload;\n\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\n      const {\n        data,\n        status\n      } = await userService.registerTeacher(payload);\n\n      if (status === 201) {\n        dispatch(REGISTER_USER_SUCCESS());\n        history.back();\n      } else dispatch(REGISTER_USER_FAILED());\n    }\n\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\n      const {\n        data,\n        status\n      } = await userService.registerStudent(payload);\n\n      if (status === 201) {\n        dispatch(REGISTER_USER_SUCCESS());\n        history.back();\n      } else dispatch(REGISTER_USER_FAILED());\n    }\n  } catch (error) {\n    dispatch(REGISTER_USER_FAILED());\n  }\n};\nexport const updateUserProfile = payload => async (dispatch, getState) => {\n  const state = getState();\n  let userType = 0;\n  let studentId = 0;\n  let teacherId = 0;\n\n  if ((payload === null || payload === void 0 ? void 0 : payload.userId) !== 0) {\n    userType = payload.userType;\n    studentId = payload.studentId;\n    teacherId = payload.teacherId;\n  } else {\n    const user = userSelectors.getUser(state);\n    const auth = userSelectors.getUser(user);\n    userType = userSelectors.getUserType(auth);\n    studentId = userSelectors.getStudentId(auth);\n    teacherId = userSelectors.getTeacherId(auth);\n  }\n\n  dispatch(UPDATE_USER_PROFILE_REQUEST());\n\n  try {\n    console.log(userType);\n\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\n      const {\n        data,\n        status\n      } = await teacherService.updateTeacherProfile({\n        teacherId,\n        ...payload\n      });\n\n      if (status === 200) {\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\n\n        if ((payload === null || payload === void 0 ? void 0 : payload.userId) !== 0) {\n          dispatch(getUserList());\n        } else dispatch(getUserProfile());\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\n    }\n\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\n      const {\n        data,\n        status\n      } = await studentService.updateStudentProfile({\n        studentId,\n        ...payload\n      });\n\n      if (status === 200) {\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\n\n        if ((payload === null || payload === void 0 ? void 0 : payload.userId) !== 0) {\n          dispatch(getUserList());\n        } else dispatch(getUserProfile());\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(UPDATE_USER_PROFILE_FAILED());\n  }\n};\nexport const deleteUser = data => async (dispatch, getState) => {\n  const {\n    userId\n  } = data;\n  dispatch(DELETE_USER_REQUEST());\n\n  try {\n    const {\n      data,\n      status\n    } = await userService.deleteUser({\n      userId\n    });\n\n    if (status === 200) {\n      dispatch(DELETE_USER_SUCCESS());\n      dispatch(getUserList());\n    } else dispatch(DELETE_USER_FAILED());\n  } catch (error) {\n    dispatch(DELETE_USER_FAILED());\n  }\n};\nexport const logout = () => async (dispatch, getState) => {\n  localStorage.removeItem(\"accessToken\");\n  dispatch(LOGOUT_SUCCESS());\n};","map":{"version":3,"sources":["C:/Users/Wen Jie/Folder/i-study/i-study-app/src/thunks/user.js"],"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_SUCCESS","GET_USER_PROFILE_REQUEST","GET_USER_PROFILE_FAILED","GET_USER_PROFILE_SUCCESS","GET_USER_LIST_SUCCESS","GET_USER_LIST_REQUEST","GET_USER_LIST_FAILED","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAILED","UPDATE_USER_PROFILE_REQUEST","UPDATE_USER_PROFILE_SUCCESS","UPDATE_USER_PROFILE_FAILED","VERIFY_TOKEN_REQUEST","VERIFY_TOKEN_SUCCESS","VERIFY_TOKEN_FAILED","DELETE_USER_SUCCESS","DELETE_USER_FAILED","DELETE_USER_REQUEST","userService","studentService","teacherService","userSelectors","USER_TYPE_NUMBER","history","login","payload","dispatch","getState","username","password","status","data","localStorage","setItem","jwt","replace","error","console","log","verifyToken","logout","getUserProfile","getUserInfo","getUserList","register","userType","TEACHER","registerTeacher","back","STUDENT","registerStudent","updateUserProfile","state","studentId","teacherId","userId","user","getUser","auth","getUserType","getStudentId","getTeacherId","updateTeacherProfile","updateStudentProfile","deleteUser","removeItem"],"mappings":"AAAA,SACEA,aADF,EAEEC,aAFF,EAGEC,YAHF,EAIEC,cAJF,EAKEC,wBALF,EAMEC,uBANF,EAOEC,wBAPF,EAQEC,qBARF,EASEC,qBATF,EAUEC,oBAVF,EAWEC,qBAXF,EAYEC,qBAZF,EAaEC,oBAbF,EAcEC,2BAdF,EAeEC,2BAfF,EAgBEC,0BAhBF,EAiBEC,oBAjBF,EAkBEC,oBAlBF,EAmBEC,mBAnBF,EAoBEC,mBApBF,EAqBEC,kBArBF,EAsBEC,mBAtBF,QAuBO,kBAvBP;AAwBA,OAAO,KAAKC,WAAZ,MAA6B,yBAA7B;AACA,OAAO,KAAKC,cAAZ,MAAgC,4BAAhC;AACA,OAAO,KAAKC,cAAZ,MAAgC,4BAAhC;AACA,OAAO,KAAKC,aAAZ,MAA+B,mBAA/B;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,OAAO,MAAMC,KAAK,GAAIC,OAAD,IAAa,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAC9DD,EAAAA,QAAQ,CAAC9B,aAAa,EAAd,CAAR;;AACA,MAAI;AACF,UAAM;AAAEgC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAyBJ,OAA/B;AACA,UAAM;AAAEK,MAAAA,MAAF;AAAUC,MAAAA;AAAV,QAAmB,MAAMb,WAAW,CAACM,KAAZ,CAAkBI,QAAlB,EAA4BC,QAA5B,CAA/B;;AACA,QAAIC,MAAM,KAAK,GAAf,EAAoB;AAClBE,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCF,IAAI,CAACG,GAAzC;AACAR,MAAAA,QAAQ,CAAC7B,aAAa,CAACkC,IAAD,CAAd,CAAR;AACAR,MAAAA,OAAO,CAACY,OAAR,CAAgB,YAAhB;AACD,KAJD,MAIO;AACLT,MAAAA,QAAQ,CAAC5B,YAAY,EAAb,CAAR;AACD;AACF,GAVD,CAUE,OAAOsC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAV,IAAAA,QAAQ,CAAC5B,YAAY,EAAb,CAAR;AACD;AACF,CAhBM;AAkBP,OAAO,MAAMyC,WAAW,GAAG,MAAM,MAAOb,QAAP,IAAoB;AACnDA,EAAAA,QAAQ,CAACd,oBAAoB,EAArB,CAAR;;AACA,MAAI;AACF,UAAM;AAAEmB,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAmB,MAAMZ,WAAW,CAACqB,WAAZ,EAA/B;AACA,UAAM;AAAEL,MAAAA;AAAF,QAAUH,IAAhB;;AACA,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClBE,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCC,GAApC;AACAR,MAAAA,QAAQ,CAACb,oBAAoB,CAACkB,IAAD,CAArB,CAAR;AACD,KAHD,MAGO;AACLL,MAAAA,QAAQ,CAACZ,mBAAmB,EAApB,CAAR;AACAY,MAAAA,QAAQ,CAACc,MAAM,EAAP,CAAR;AACD;AACF,GAVD,CAUE,OAAOJ,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAV,IAAAA,QAAQ,CAACZ,mBAAmB,EAApB,CAAR;AACD;AACF,CAhBM;AAkBP,OAAO,MAAM2B,cAAc,GAAG,MAAM,OAAOf,QAAP,EAAiBC,QAAjB,KAA8B;AAChED,EAAAA,QAAQ,CAAC1B,wBAAwB,EAAzB,CAAR;;AACA,MAAI;AACF,UAAM;AAAE+B,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAmB,MAAMZ,WAAW,CAACwB,WAAZ,EAA/B;;AACA,QAAIZ,MAAM,KAAK,GAAf,EAAoB;AAClBJ,MAAAA,QAAQ,CAACxB,wBAAwB,CAAC6B,IAAD,CAAzB,CAAR;AACD,KAFD,MAEOL,QAAQ,CAACzB,uBAAuB,EAAxB,CAAR;AACR,GALD,CAKE,OAAOmC,KAAP,EAAc;AACdV,IAAAA,QAAQ,CAACzB,uBAAuB,EAAxB,CAAR;AACD;AACF,CAVM;AAYP,OAAO,MAAM0C,WAAW,GAAG,MAAM,OAAOjB,QAAP,EAAiBC,QAAjB,KAA8B;AAC7DD,EAAAA,QAAQ,CAACtB,qBAAqB,EAAtB,CAAR;;AACA,MAAI;AACF,UAAM;AAAE2B,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAmB,MAAMZ,WAAW,CAACyB,WAAZ,EAA/B;;AAEA,QAAIb,MAAM,KAAK,GAAf,EAAoB;AAClBJ,MAAAA,QAAQ,CAACvB,qBAAqB,CAAC4B,IAAD,CAAtB,CAAR;AACD,KAFD,MAEOL,QAAQ,CAACrB,oBAAoB,EAArB,CAAR;AACR,GAND,CAME,OAAO+B,KAAP,EAAc;AACdV,IAAAA,QAAQ,CAACrB,oBAAoB,EAArB,CAAR;AACD;AACF,CAXM;AAaP,OAAO,MAAMuC,QAAQ,GAAInB,OAAD,IAAa,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACjED,EAAAA,QAAQ,CAACpB,qBAAqB,EAAtB,CAAR;;AACA,MAAI;AACF,UAAM;AAAEuC,MAAAA;AAAF,QAAepB,OAArB;;AACA,QAAIoB,QAAQ,KAAKvB,gBAAgB,CAACwB,OAAlC,EAA2C;AACzC,YAAM;AAAEf,QAAAA,IAAF;AAAQD,QAAAA;AAAR,UAAmB,MAAMZ,WAAW,CAAC6B,eAAZ,CAA4BtB,OAA5B,CAA/B;;AAEA,UAAIK,MAAM,KAAK,GAAf,EAAoB;AAClBJ,QAAAA,QAAQ,CAACnB,qBAAqB,EAAtB,CAAR;AACAgB,QAAAA,OAAO,CAACyB,IAAR;AACD,OAHD,MAGOtB,QAAQ,CAAClB,oBAAoB,EAArB,CAAR;AACR;;AACD,QAAIqC,QAAQ,KAAKvB,gBAAgB,CAAC2B,OAAlC,EAA2C;AACzC,YAAM;AAAElB,QAAAA,IAAF;AAAQD,QAAAA;AAAR,UAAmB,MAAMZ,WAAW,CAACgC,eAAZ,CAA4BzB,OAA5B,CAA/B;;AAEA,UAAIK,MAAM,KAAK,GAAf,EAAoB;AAClBJ,QAAAA,QAAQ,CAACnB,qBAAqB,EAAtB,CAAR;AACAgB,QAAAA,OAAO,CAACyB,IAAR;AACD,OAHD,MAGOtB,QAAQ,CAAClB,oBAAoB,EAArB,CAAR;AACR;AACF,GAlBD,CAkBE,OAAO4B,KAAP,EAAc;AACdV,IAAAA,QAAQ,CAAClB,oBAAoB,EAArB,CAAR;AACD;AACF,CAvBM;AAyBP,OAAO,MAAM2C,iBAAiB,GAAI1B,OAAD,IAAa,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAC1E,QAAMyB,KAAK,GAAGzB,QAAQ,EAAtB;AACA,MAAIkB,QAAQ,GAAG,CAAf;AACA,MAAIQ,SAAS,GAAG,CAAhB;AACA,MAAIC,SAAS,GAAG,CAAhB;;AACA,MAAI,CAAA7B,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAE8B,MAAT,MAAoB,CAAxB,EAA2B;AACzBV,IAAAA,QAAQ,GAAGpB,OAAO,CAACoB,QAAnB;AACAQ,IAAAA,SAAS,GAAG5B,OAAO,CAAC4B,SAApB;AACAC,IAAAA,SAAS,GAAG7B,OAAO,CAAC6B,SAApB;AACD,GAJD,MAIO;AACL,UAAME,IAAI,GAAGnC,aAAa,CAACoC,OAAd,CAAsBL,KAAtB,CAAb;AACA,UAAMM,IAAI,GAAGrC,aAAa,CAACoC,OAAd,CAAsBD,IAAtB,CAAb;AACAX,IAAAA,QAAQ,GAAGxB,aAAa,CAACsC,WAAd,CAA0BD,IAA1B,CAAX;AAEAL,IAAAA,SAAS,GAAGhC,aAAa,CAACuC,YAAd,CAA2BF,IAA3B,CAAZ;AACAJ,IAAAA,SAAS,GAAGjC,aAAa,CAACwC,YAAd,CAA2BH,IAA3B,CAAZ;AACD;;AAEDhC,EAAAA,QAAQ,CAACjB,2BAA2B,EAA5B,CAAR;;AACA,MAAI;AACF4B,IAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ;;AACA,QAAIA,QAAQ,KAAKvB,gBAAgB,CAACwB,OAAlC,EAA2C;AACzC,YAAM;AAAEf,QAAAA,IAAF;AAAQD,QAAAA;AAAR,UAAmB,MAAMV,cAAc,CAAC0C,oBAAf,CAAoC;AACjER,QAAAA,SADiE;AAEjE,WAAG7B;AAF8D,OAApC,CAA/B;;AAKA,UAAIK,MAAM,KAAK,GAAf,EAAoB;AAClBJ,QAAAA,QAAQ,CAAChB,2BAA2B,EAA5B,CAAR;;AACA,YAAI,CAAAe,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAE8B,MAAT,MAAoB,CAAxB,EAA2B;AACzB7B,UAAAA,QAAQ,CAACiB,WAAW,EAAZ,CAAR;AACD,SAFD,MAEOjB,QAAQ,CAACe,cAAc,EAAf,CAAR;AACR,OALD,MAKOf,QAAQ,CAACf,0BAA0B,EAA3B,CAAR;AACR;;AACD,QAAIkC,QAAQ,KAAKvB,gBAAgB,CAAC2B,OAAlC,EAA2C;AACzC,YAAM;AAAElB,QAAAA,IAAF;AAAQD,QAAAA;AAAR,UAAmB,MAAMX,cAAc,CAAC4C,oBAAf,CAAoC;AACjEV,QAAAA,SADiE;AAEjE,WAAG5B;AAF8D,OAApC,CAA/B;;AAKA,UAAIK,MAAM,KAAK,GAAf,EAAoB;AAClBJ,QAAAA,QAAQ,CAAChB,2BAA2B,EAA5B,CAAR;;AACA,YAAI,CAAAe,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAE8B,MAAT,MAAoB,CAAxB,EAA2B;AACzB7B,UAAAA,QAAQ,CAACiB,WAAW,EAAZ,CAAR;AACD,SAFD,MAEOjB,QAAQ,CAACe,cAAc,EAAf,CAAR;AACR,OALD,MAKOf,QAAQ,CAACf,0BAA0B,EAA3B,CAAR;AACR;AACF,GA5BD,CA4BE,OAAOyB,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAV,IAAAA,QAAQ,CAACf,0BAA0B,EAA3B,CAAR;AACD;AACF,CAnDM;AAqDP,OAAO,MAAMqD,UAAU,GAAIjC,IAAD,IAAU,OAAOL,QAAP,EAAiBC,QAAjB,KAA8B;AAChE,QAAM;AAAE4B,IAAAA;AAAF,MAAaxB,IAAnB;AACAL,EAAAA,QAAQ,CAACT,mBAAmB,EAApB,CAAR;;AACA,MAAI;AACF,UAAM;AAAEc,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAmB,MAAMZ,WAAW,CAAC8C,UAAZ,CAAuB;AAAET,MAAAA;AAAF,KAAvB,CAA/B;;AACA,QAAIzB,MAAM,KAAK,GAAf,EAAoB;AAClBJ,MAAAA,QAAQ,CAACX,mBAAmB,EAApB,CAAR;AACAW,MAAAA,QAAQ,CAACiB,WAAW,EAAZ,CAAR;AACD,KAHD,MAGOjB,QAAQ,CAACV,kBAAkB,EAAnB,CAAR;AACR,GAND,CAME,OAAOoB,KAAP,EAAc;AACdV,IAAAA,QAAQ,CAACV,kBAAkB,EAAnB,CAAR;AACD;AACF,CAZM;AAcP,OAAO,MAAMwB,MAAM,GAAG,MAAM,OAAOd,QAAP,EAAiBC,QAAjB,KAA8B;AACxDK,EAAAA,YAAY,CAACiC,UAAb,CAAwB,aAAxB;AACAvC,EAAAA,QAAQ,CAAC3B,cAAc,EAAf,CAAR;AACD,CAHM","sourcesContent":["import {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILED,\r\n  LOGOUT_SUCCESS,\r\n  GET_USER_PROFILE_REQUEST,\r\n  GET_USER_PROFILE_FAILED,\r\n  GET_USER_PROFILE_SUCCESS,\r\n  GET_USER_LIST_SUCCESS,\r\n  GET_USER_LIST_REQUEST,\r\n  GET_USER_LIST_FAILED,\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAILED,\r\n  UPDATE_USER_PROFILE_REQUEST,\r\n  UPDATE_USER_PROFILE_SUCCESS,\r\n  UPDATE_USER_PROFILE_FAILED,\r\n  VERIFY_TOKEN_REQUEST,\r\n  VERIFY_TOKEN_SUCCESS,\r\n  VERIFY_TOKEN_FAILED,\r\n  DELETE_USER_SUCCESS,\r\n  DELETE_USER_FAILED,\r\n  DELETE_USER_REQUEST,\r\n} from \"../reducers/user\";\r\nimport * as userService from \"../services/userService\";\r\nimport * as studentService from \"../services/studentService\";\r\nimport * as teacherService from \"../services/teacherService\";\r\nimport * as userSelectors from \"../selectors/user\";\r\nimport { USER_TYPE_NUMBER } from \"../utilities/constants\";\r\nimport history from \"../utilities/history\";\r\n\r\nexport const login = (payload) => async (dispatch, getState) => {\r\n  dispatch(LOGIN_REQUEST());\r\n  try {\r\n    const { username, password } = payload;\r\n    const { status, data } = await userService.login(username, password);\r\n    if (status === 200) {\r\n      localStorage.setItem(\"accessToken\", data.jwt);\r\n      dispatch(LOGIN_SUCCESS(data));\r\n      history.replace(\"/dashboard\");\r\n    } else {\r\n      dispatch(LOGIN_FAILED());\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch(LOGIN_FAILED());\r\n  }\r\n};\r\n\r\nexport const verifyToken = () => async (dispatch) => {\r\n  dispatch(VERIFY_TOKEN_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.verifyToken();\r\n    const { jwt } = data;\r\n    if (status === 200) {\r\n      localStorage.setItem(\"accessToken\", jwt);\r\n      dispatch(VERIFY_TOKEN_SUCCESS(data));\r\n    } else {\r\n      dispatch(VERIFY_TOKEN_FAILED());\r\n      dispatch(logout());\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch(VERIFY_TOKEN_FAILED());\r\n  }\r\n};\r\n\r\nexport const getUserProfile = () => async (dispatch, getState) => {\r\n  dispatch(GET_USER_PROFILE_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.getUserInfo();\r\n    if (status === 200) {\r\n      dispatch(GET_USER_PROFILE_SUCCESS(data));\r\n    } else dispatch(GET_USER_PROFILE_FAILED());\r\n  } catch (error) {\r\n    dispatch(GET_USER_PROFILE_FAILED());\r\n  }\r\n};\r\n\r\nexport const getUserList = () => async (dispatch, getState) => {\r\n  dispatch(GET_USER_LIST_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.getUserList();\r\n\r\n    if (status === 200) {\r\n      dispatch(GET_USER_LIST_SUCCESS(data));\r\n    } else dispatch(GET_USER_LIST_FAILED());\r\n  } catch (error) {\r\n    dispatch(GET_USER_LIST_FAILED());\r\n  }\r\n};\r\n\r\nexport const register = (payload) => async (dispatch, getState) => {\r\n  dispatch(REGISTER_USER_REQUEST());\r\n  try {\r\n    const { userType } = payload;\r\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\r\n      const { data, status } = await userService.registerTeacher(payload);\r\n\r\n      if (status === 201) {\r\n        dispatch(REGISTER_USER_SUCCESS());\r\n        history.back();\r\n      } else dispatch(REGISTER_USER_FAILED());\r\n    }\r\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\r\n      const { data, status } = await userService.registerStudent(payload);\r\n\r\n      if (status === 201) {\r\n        dispatch(REGISTER_USER_SUCCESS());\r\n        history.back();\r\n      } else dispatch(REGISTER_USER_FAILED());\r\n    }\r\n  } catch (error) {\r\n    dispatch(REGISTER_USER_FAILED());\r\n  }\r\n};\r\n\r\nexport const updateUserProfile = (payload) => async (dispatch, getState) => {\r\n  const state = getState();\r\n  let userType = 0;\r\n  let studentId = 0;\r\n  let teacherId = 0;\r\n  if (payload?.userId !== 0) {\r\n    userType = payload.userType;\r\n    studentId = payload.studentId;\r\n    teacherId = payload.teacherId;\r\n  } else {\r\n    const user = userSelectors.getUser(state);\r\n    const auth = userSelectors.getUser(user);\r\n    userType = userSelectors.getUserType(auth);\r\n\r\n    studentId = userSelectors.getStudentId(auth);\r\n    teacherId = userSelectors.getTeacherId(auth);\r\n  }\r\n\r\n  dispatch(UPDATE_USER_PROFILE_REQUEST());\r\n  try {\r\n    console.log(userType);\r\n    if (userType === USER_TYPE_NUMBER.TEACHER) {\r\n      const { data, status } = await teacherService.updateTeacherProfile({\r\n        teacherId,\r\n        ...payload,\r\n      });\r\n\r\n      if (status === 200) {\r\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\r\n        if (payload?.userId !== 0) {\r\n          dispatch(getUserList());\r\n        } else dispatch(getUserProfile());\r\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\r\n    }\r\n    if (userType === USER_TYPE_NUMBER.STUDENT) {\r\n      const { data, status } = await studentService.updateStudentProfile({\r\n        studentId,\r\n        ...payload,\r\n      });\r\n\r\n      if (status === 200) {\r\n        dispatch(UPDATE_USER_PROFILE_SUCCESS());\r\n        if (payload?.userId !== 0) {\r\n          dispatch(getUserList());\r\n        } else dispatch(getUserProfile());\r\n      } else dispatch(UPDATE_USER_PROFILE_FAILED());\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch(UPDATE_USER_PROFILE_FAILED());\r\n  }\r\n};\r\n\r\nexport const deleteUser = (data) => async (dispatch, getState) => {\r\n  const { userId } = data;\r\n  dispatch(DELETE_USER_REQUEST());\r\n  try {\r\n    const { data, status } = await userService.deleteUser({ userId });\r\n    if (status === 200) {\r\n      dispatch(DELETE_USER_SUCCESS());\r\n      dispatch(getUserList());\r\n    } else dispatch(DELETE_USER_FAILED());\r\n  } catch (error) {\r\n    dispatch(DELETE_USER_FAILED());\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch, getState) => {\r\n  localStorage.removeItem(\"accessToken\");\r\n  dispatch(LOGOUT_SUCCESS());\r\n};\r\n"]},"metadata":{},"sourceType":"module"}